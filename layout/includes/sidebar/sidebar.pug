mixin post_info(article)
  .post_item
    a.post_link(href=url_for(article.path) title=article.title)
      if article.cover
        img.post_cover(src=article.cover alt=article.title)
      .post_info
        p.post_title=(article.title ? article.title : _p('post_item.notitle') )
        time(datetime=date_xml(article.date))= date(article.date)

each value, head in theme.custom.sidebar.items
  - const item = (head + '').split(', ')
  .item
    case item[0]
      when "site"
        .item_info
          - var icon_ori = value.icon ? (value.icon + '').split(', ') : false
          - var icon = icon_ori[0] ? icon_ori[0] : "fas fa-chart-line"
          - var icon_color = icon_ori[1] ? icon_ori[1] : "var(--text-color-rf)"
          i(class=icon+' item_icon' style="color:"+icon_color+";")
          - var title = value.title ? value.title : _p("sidebar.site_info.title")
          span=title
        each sub_body, sub_head in value
          - var sub_item = (sub_head + '').split(', ')        
          case sub_item[0]
            when "num_of_articles"
              .content
                span.title=_p("sidebar.site_info.num_of_articles")
                span.value=site.posts.length
            when "total_word_count"
              .content
                span.title=_p("sidebar.site_info.total_word_count")
                span.value=totalcount(site)
            when "total_visitors"
              .content
                span.title=_p("sidebar.site_info.total_visitors")
                span.value#busuanzi_value_site_pv
            when "total_visits"
              .content
                span.title=_p("sidebar.site_info.total_visits")
                span.value#busuanzi_value_site_uv
            when "runtime"
              .content
                span.title=_p("sidebar.site_info.runtime")
                span.value#runtime(beginTime=date_xml(theme.info.site_begin))
            when "last_update"
              .content
                span.title=_p("sidebar.site_info.last_update")
                span.value#last_update(last_update_value=date_xml(Date.now()))
            when "text"
              .content
                span.text=sub_body
      when 'author'
        .item_author
          each sub_body, sub_head in value
            - var sub_item = (sub_head + '').split(', ')
            case sub_item[0]
              when "avatar"
                .avatar
                  if sub_body == 'round'
                    img.round(src=url_for(theme.info.avatar) alt="avatar")
                  else
                    img(src=url_for(theme.info.avatar) alt="avatar")
              when "author_name"
                .author_name
                  span.author_name= sub_body ? sub_body : config.author
              when "social_link"
                .social_link
                  if theme.info.social_link
                    each ori_soc_lnk in theme.info.social_link
                      - var soc_lnk = (ori_soc_lnk + '').split(', ')
                      a(href=url_for(soc_lnk[1]) title=soc_lnk[2])
                        i(class=soc_lnk[0])
              when "button"
                .button
                  - var btn = (sub_body + '').split(', ')
                  a.button(href=btn[0])
                    if btn[2] != 'none'
                      i(class=btn[2])
                    span=btn[1]
              when "text"
                .text
                  span.text=sub_body
      when 'newest_posts'
        .item_info
          if (typeof value == 'object') && value
            - var icon_ori = value.icon ? (value.icon + '').split(', ') : false
            - var icon = icon_ori[0] ? icon_ori[0] : "fas fa-calendar"
            - var icon_color = icon_ori[1] ? icon_ori[1] : "var(--text-color-rf)"
            i(class=icon+' item_icon' style="color:"+icon_color+";")
            - var title = value.title ? value.title : _p("sidebar.newest_posts.title")
            span=title
          else
            i(class='fas fa-calendar item_icon' style="color:var(--text-color-rf);")
            span=_p("sidebar.newest_posts.title")
        - var final_limit = 6
        if (typeof value == 'object') && value
          - final_limit = value.limit ? value.limit : 6
        - site.posts.sort("updated", -1).limit(final_limit).each(function(article){
            +post_info(article)
        - })
      when 'tags'
        .item_info
          if (typeof value == 'object') && value
            - var icon_ori = value.icon ? (value.icon + '').split(', ') : false
            - var icon = icon_ori[0] ? icon_ori[0] : "fas fa-tags"
            - var icon_color = icon_ori[1] ? icon_ori[1] : "var(--text-color-rf)"
            i(class=icon+' item_icon' style="color:"+icon_color+";")
            - var title = value.title ? value.title : _p("sidebar.tags.title")
            span=title
          else
            i(class='fas fa-tags item_icon' style="color:var(--text-color-rf);")
            span=_p("sidebar.tags.title")
        - var f_limit = 30
        - var f_color = true
        - var s_color = "#3EA919"
        - var e_color = "#156FD6"
        if (typeof value == 'object') && value
          - f_limit = value.limit ? value.limit : 30
          - f_color = value.colorful ? value.colorful : true
          - s_color = value.start_color ? value.start_color : "#3EA919"
          - e_color = value.end_color ? value.end_color : "#156FD6"
        .tag_cloud!= tagcloud({min_font: 15, max_font: 20, amount: f_limit, color: f_color, start_color: s_color, end_color: e_color})
      when 'categories'
        .item_info
          if (typeof value == 'object') && value
            - var icon_ori = value.icon ? (value.icon + '').split(', ') : false
            - var icon = icon_ori[0] ? icon_ori[0] : "fas fa-folder-open"
            - var icon_color = icon_ori[1] ? icon_ori[1] : "var(--text-color-rf)"
            i(class=icon+' item_icon' style="color:"+icon_color+";")
            - var title = value.title ? value.title : _p("sidebar.categories.title")
            span=title
          else
            i(class='fas fa-folder-open item_icon' style="color:var(--text-color-rf);")
            span=_p("sidebar.categories.title")
        - var f_depth = 1
        - var f_show_count = true
        if (typeof value == 'object') && value
          - f_limit = value.depth ? value.depth : 1
          - f_show_count = value.show_count ? value.show_count : true
        .categoriesList!= list_categories({ depth: 1, show_count: f_show_count })
      when 'item'
        .item_info
          if value.icon
            i(class= (value.icon + '').split(', ')[0] + " item_icon" style="color:"+((value.icon + '').split(', ')[1]?(value.icon + '').split(', ')[1]:"var(--text-color-rf)")+";")
          if value.title
            span=value.title
        each sub_body, sub_head in value
          case sub_head
            when "button"
              .button
                - var btn = (sub_body + '').split(', ')
                a.button(href=btn[0])
                  if btn[2] != 'none'
                    i(class=btn[2])
                  span=btn[1]
            when "text"
              .text!=`${sub_body}`